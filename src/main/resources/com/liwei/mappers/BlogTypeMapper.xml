<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liwei.dao.BlogTypeDao">

    <resultMap id="BlogTypeResultMap" type="BlogType">
        <result column="id" property="id"/>
        <result column="type_name" property="typeName"/>
        <result column="order_no" property="orderNo"/>
    </resultMap>


    <!-- 统计每个 type_name 有多少篇博文 -->
    <select id="countList" resultMap="BlogTypeResultMap">
        SELECT
          t1.id,
          t1.type_name,
          t1.order_no,
          COUNT(t2.id) AS blogCount
        FROM
          t_blogtype t1 RIGHT JOIN t_blog t2 ON t1.id = t2.type_id
        GROUP BY t1.id
        ORDER BY t1.order_no
    </select>

    <select id="findById" parameterType="int" resultMap="BlogTypeResultMap">
        SELECT
            `id`,`type_name`,`order_no`
        FROM
            t_blogtype
        where id= #{id}
    </select>

</mapper>